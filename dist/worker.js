!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=20)}({1:function(t,r,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.d(r,"a",(function(){return u})),e.d(r,"c",(function(){return i})),e.d(r,"b",(function(){return s})),e.d(r,"d",(function(){return f})),e.d(r,"e",(function(){return c})),e.d(r,"f",(function(){return l}));var o=["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"],a=["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)","rgba(201, 203, 207, 0.2)"],u="768px";function i(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(t){case"color":return o[r%o.length];case"background":return a[r%a.length];default:return o[r%o.length]}}function c(t){for(var r=[],e=[],n=[],o=[],a=0;a<t;)r.push(i("color",a)),e.push(i("background",a)),n.push(i("background",a)),o.push(i("color",a)),a++;return{borderColor:r,backgroundColor:e,pointBackgroundColor:n,pointBorderColor:o}}function s(t,r){return t<r?-1:t>r?1:0}function f(t,r){return t-r}function l(t){return"object"===n(t)?t.toString():String(t)}},2:function(t,r,e){"use strict";var n;e.d(r,"a",(function(){return u})),e.d(r,"d",(function(){return a})),e.d(r,"e",(function(){return c})),e.d(r,"f",(function(){return l})),e.d(r,"i",(function(){return i})),e.d(r,"g",(function(){return s})),e.d(r,"h",(function(){return f})),e.d(r,"c",(function(){return d})),e.d(r,"b",(function(){return b}));var o=["raw","processed","datasets","labels"];function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(r,e){var a=indexedDB.open("chartsy",1);a.onerror=function(){e(event.target.errorCode)},a.onsuccess=function(t){(n=t.target.result).onversionchange=function(){n.close()},r(n)},a.onupgradeneeded=function(r){var e=r.target.result;o.forEach((function(r){if("raw"===r){var n=e.createObjectStore(r,{autoIncrement:!0});t.forEach((function(t){return n.createIndex(t,t,{unique:!1})}))}else e.createObjectStore(r)}))}}))}function u(t){return new Promise((function(r,e){new Promise((function(t,r){var e=window.indexedDB.deleteDatabase("chartsy");e.onerror=function(){r(event.target.errorCode)},e.onsuccess=function(r){t()},e.onblocked=function(t){r()}})).then((function(){return a(t)})).then((function(){return r()})).catch((function(){return e()}))}))}function i(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"raw";return new Promise((function(e,o){var a=n.transaction([r],"readwrite");a.onerror=function(t){o(t.target.errorCode)},a.oncomplete=function(t){e()};var u=a.objectStore(r);t.forEach((function(t){return u.add(t)}))}))}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"raw",r=arguments.length>1?arguments[1]:void 0;return r||(r=t),new Promise((function(e,o){var a=n.transaction([t]).objectStore(t).get(r);a.onerror=function(t){o(t.target.errorCode)},a.onsuccess=function(t){e(t.target.result)}}))}function s(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"raw",e=arguments.length>2?arguments[2]:void 0;return e||(e=r),new Promise((function(o,a){var u=n.transaction([r],"readwrite").objectStore(r).put(t,e);u.onerror=function(t){a(t.target.errorCode)},u.onsuccess=function(){o(t)}}))}function f(t,r){return new Promise((function(e,o){var a=n.transaction([r],"readwrite"),u=a.objectStore(r);t.forEach((function(t,r){u.put(t,r)})),a.onerror=function(t){o(t.target.errorCode)},a.oncomplete=function(){e(t)}}))}function l(t){return new Promise((function(r,e){var o=n.transaction([t]).objectStore(t).getAll();o.onerror=function(t){e(t.target.errorCode)},o.onsuccess=function(t){r(t.target.result)}}))}function d(){try{return n.transaction(["data"]).abort(),!0}catch(t){return!1}}function b(t,r,e){return new Promise((function(o,a){console.log(t,r,e),void 0!==t&&void 0!==r&&void 0!==e||a("getByIndex missing paramters");var u=n.transaction([t],"readonly").objectStore(t).index(r).getAll(e);u.onsuccess=function(){o(u.result)},u.onerror=function(t){a(t.target.errorCode)}}))}},20:function(t,r,e){"use strict";e.r(r);var n=e(4),o=e(2);function a(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function u(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?a(Object(e),!0).forEach((function(r){i(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function i(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}onmessage=function(t){new Promise((function(t,r){if(self.db&&Object(o.c)())return t(self.db);Object(o.d)().then((function(r){self.db=r,t(r)})).catch((function(t){return t}))})).then((function(){return Object(o.f)("raw")})).then((function(r){return Object(n.b)(u(u({},t.data),{},{data:r}))})).then((function(t){return Object(o.g)(t,"processed")})).then((function(){return postMessage(null)}))}},4:function(t,r,e){"use strict";e.d(r,"b",(function(){return y})),e.d(r,"a",(function(){return v}));var n=e(1);function o(t,r,e,n,o){this.groupName=t,this.graphType=r,this.aggregate=e,this.counts=n||new Map,this.data=o||new Map}function a(t){switch(t){case"None":return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return isNaN(Number(r))||t.push(r),t};case"Count":return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return isNaN(Number(r))?t:t+1};case"Max":return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NEGATIVE_INFINITY,r=arguments.length>1?arguments[1]:void 0;return isNaN(Number(r))?t:Math.max(t,r)};case"Min":return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,r=arguments.length>1?arguments[1]:void 0;return isNaN(Number(r))?t:Math.min(t,r)};default:return function(t,r){return(t||0)+(r||0)}}}o.countsFunc=a("Count"),o.prototype.toString=function(){return JSON.stringify({counts:this.counts,data:this.data})},o.prototype.aggregateData=function(){var t,r=this;switch(this.aggregate){case"Count":t=new Map(this.counts);break;case"Average":t=new Map,this.data.forEach((function(e,n){return t.set(n,e/r.counts.get(n))}));break;default:t=new Map(this.data)}return t},o.prototype.getData=function(){return this.data},o.prototype.getDataPoint=function(t){return this.data.get(t)},o.prototype.addData=function(t,r){var e=this.data.get(t);this.data.set(t,a(this.aggregate)(e,r)),e=this.counts.get(t)||0,this.counts.set(t,o.countsFunc(e,r))},o.prototype.adjustData=function(t,r){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=Math.pow(-1,e),o=this.data.get(t);switch(this.aggregate){case"None":break;case"Sum":case"Average":this.data.set(t,o+n*o)}};var u=o;function i(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],n=!0,o=!1,a=void 0;try{for(var u,i=t[Symbol.iterator]();!(n=(u=i.next()).done)&&(e.push(u.value),!r||e.length!==r);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return c(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return c(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function s(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function f(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function l(t,r,e,n,o){var a=this;this.graphType=t,this.aggregate=r,this.dataType=e,this.datasets=new Map,this.labels=o||new Set,n&&n.forEach((function(e){return a.datasets.set(e.groupName,new u(e.groupName,t,r,e.counts,e.data))}))}l.prototype.addLabel=function(t){this.labels.add(t)},l.prototype.getGroup=function(t){if(this.datasets.get(t))return this.datasets.get(t);var r=new u(t,this.graphType,this.aggregate);return this.datasets.set(t,r),r},l.prototype.addData=function(t,r,e){this.getGroup(t).addData(r,e)},l.prototype.getChartJsDataSets=function(){var t=this.formatData();return{datasets:t,labels:this.formatLabels(t)}},l.prototype.formatData=function(){var t=this,r=[],e=0;return this.datasets.forEach((function(n,o){var a=n.aggregateData();switch(t.graphType){case"scatter":case"line":case"area":a=Array.from(t.labels).filter((function(t){return void 0!==a.get(t)})).map((function(t){var r=a.get(t);return Array.isArray(r)?r.map((function(r){return{x:t,y:r}})):{x:t,y:r}}));break;case"bar":case"pie":case"doughnut":a=Array.from(t.labels).map((function(t){return a.get(t)}))}r.push(t.createDataSet(o,a.flat(),e++))})),r},l.prototype.createDataSet=function(t,r,e){var o={},a=!1,u=Object(n.c)("color",e),i=Object(n.c)("background",e);switch(this.graphType){case"area":a=!0;break;case"bar":1===this.datasets.size&&(o=Object(n.e)(r.length));break;case"pie":case"doughnut":o=Object(n.e)(r.length)}return function(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?s(Object(e),!0).forEach((function(r){f(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):s(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}({label:t,fill:a,borderColor:u,backgroundColor:i,borderWidth:1,pointBackgroundColor:i,pointBorderColor:u,pointBorderWidth:1,lineTension:0,data:r},o)},l.prototype.formatLabels=function(t){var r,e="number"===this.dataType?n.d:n.b;switch(this.graphType){case"line":case"scatter":case"area":r=Array.from(this.labels).sort((function(t,r){return e(t,r)})),t.forEach((function(t){return t.data.sort((function(t,r){var n=t.x,o=r.x;return e(n,o)}))}));break;case"bar":case"pie":case"doughnut":(r=Array.from(this.labels).map((function(t,r){return[t,r]}))).sort((function(t,r){var n=i(t,2),o=n[0],a=(n[1],i(r,2)),u=a[0];a[1];return e(o,u)})),t.forEach((function(t){t.data=r.map((function(r){var e=i(r,2),n=(e[0],e[1]);return t.data[n]}))})),r=r.map((function(t){var r=i(t,2),e=r[0];r[1];return e}));break;case"bubble":case"radar":default:return{}}return r};var d=l,b=e(2);function g(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],n=!0,o=!1,a=void 0;try{for(var u,i=t[Symbol.iterator]();!(n=(u=i.next()).done)&&(e.push(u.value),!r||e.length!==r);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return p(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return p(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function h(t,r){if(t.filterCategory)!function(t,r){var e=t.filterCategory,n=t.filterValue,o=(t.filterStatus,t.dataType),a=n;"number"===o[e]&&(a=Number(n));Object(b.b)("raw",e,a).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))}(t);else{var e=t.data,o=t.filters,a=t.selectedGroup,u=t.x,i=t.y,c=Object.keys(e[0]);e.forEach((function(t){if(c.every((function(r){return function(t,r,e){return t.get(e).get(Object(n.f)(r[e]))}(o,t,r)}))){var e=Array.from(a).map((function(r){return t[r]})).join(","),s=t[u],f=t[i];!function(t,r,e,n,o,a){a.addLabel(e),a.addData(r,e,n)}(0,e,Object(n.f)(s),f,0,r)}}))}}function y(t){var r=t.x,e=t.y;return r&&e?new Promise((function(r,e){var n,o=new Date;(function(t){return new Promise((function(r,e){var n=t.graphType,o=t.x,a=t.dataType,u=t.aggregate;t.filterCategory?Promise.all([Object(b.f)("datasets"),Object(b.e)("labels")]).then((function(t){var e=g(t,2),i=e[0],c=e[1];i.length?r(new d(n,u,a[o],i,c)):r(new d(n,u,a[o]))})):r(new d(n,u,a[o]))}))})(t).then((function(t){return n=t})).then((function(){return h(t,n)})).then((function(){Promise.all([Object(b.h)(n.datasets,"datasets"),Object(b.g)(n.labels,"labels")]),console.log(new Date-o),r(n.getChartJsDataSets())})).catch((function(t){return e(t)}))})):{}}function v(t){var r=new Map,e=new Map;return Object.keys(t[0]).forEach((function(o){r.set(o,new Map),e.set(o,!1),t.forEach((function(t){return r.get(o).set(Object(n.f)(t[o]),!0)}))})),{filters:r,groups:e}}}});